% SOW must be emailed to the course instructor at akhamis@pami.uwaterloo.ca
% with subject SOW-[Your Project number] no later than June 9, 2014.

% (We are team #27)

\documentclass[a4paper]{article}

\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{parskip}
\usepackage{amssymb}
\usepackage{upgreek}
\usepackage{todonotes}
\usepackage{csquotes}

% Allow for sub^3sections and sub^4sections
% http://pleasemakeanote.blogspot.com/2010/06/how-to-activate-subsubsubsection-in.html
\setcounter{secnumdepth}{5}
\newcommand{\subsubsubsection}[1]{\paragraph{#1} \mbox{}}
\newcommand{\subsubsubsubsection}[1]{\subparagraph{#1} \mbox{}}

\newcommand\Forall{\mathop{\mbox{\Large $\mathsurround0pt\forall$}}}


\title{Complex Task Allocation: A Comparison of Metaheuristics}
\author{
	Group 27 \\
	\\
	Lucas Wojciechowksi, Ariel Weingarten, Alexander Maguire, \\
	Austin Dobrik, Dane Carr}
\date{\today}

\begin{document}

\maketitle

% TODO Write out all irrational numbers to 4 decimal points
% TODO Represent solutions as S_0^3
% TODO All tasks must be 1-indexed
% TODO All robots must be 1-indexed
% TODO We must use a consistent naming convention for robots/sensors, homes/homes, tasks
% TODO We must use a consistent formatting in representing solutions, esp sentinal values
% TODO Do number equations and reference them by their number

\section*{Summary}
% The summary should be a brief version of the full report It should give the
% reader an accurate overview Be brief, but be specific.
This report is an analysis of the efficacy of different meta-heuristic algorithms in solving a complex task allocation problem.
Complex task allocation is the assignment of complex and simple tasks to a group of robots. This report is taking an optimization-based approach to solve a multi-task robot, single-robot task, instantaneous assignment version of the multirobot task assignment problem that adopts a decompose-then allocate strategy to handle complex tasks.

Five meta-heuristic algorithms were tested for this report. They are: Taboo Search, Simulated Annealing, Genetic Algorithms, Particle Swarm Optimization, and Ant Colony Optimization.

These algorithms will be run on a dataset that INSERT DESCRIPTION OF THE DATASET HERE.

The results of experimentation are as follows. The algorithm that produced the most optimal solution in ITERATIONS is ALGORITHM.
If computation time needs to be minimized, then ALGORITHM is able to produce the most optimal solution in SMALLER NUMBER of ITERATIONS.

In conclusions, this report recommends the use of ALGORITHM.

\section{Introduction}
% Why is the problem important
As the digital revolution leaves the second digital wave behind, and embraces the robotics wave[1], it is becoming increasingly important to prepare for the impending ubiquity of robots.

In particular, Multirobot Systems (MRS) are becoming a high interest subject. An MRS is a group of robots that are designed with the intent of performing a collective behavior.\\
There are numerous advantages associated with a group of simple robots over a single multi-purpose robot. For example, it is simpler to design a robust single purpose robot than a robot with multiple abilities and configurations. Simple designs tend to be more robust and lead to more reliable robots. Another source of reliability is that a group of robots can accommodate some degree of redundancy in composition.  In addition, many complex tasks are distributed over a large area and would be slow to accomplish with a single-agent system. Examples of problems that can be solved by MRSs are search and rescue in burning building, surveillance and space construction.\\

% What is the problem
\subsection{Multirobot Task Allocation}
This report is specifically considering the problem of Complex Task Allocation for an MRS. The problem statement reads as follows:\\
\blockquote{In mobile surveillance systems, complex task allocation addresses how to optimally assign a set of surveillance tasks to a set of mobile sensing agents to maximize overall expected performance, taking into account the priorities of the tasks and the skill ratings of the mobile robots.}
This problem is important to solve because areas under surveillance usually possess some degree of danger. Being able to replace human sentinels with robots has the potential to save the lives of the surveyors and of nearby civilians by providing advanced warning of incoming threats. The task allocation problem specifically is important because an optimal solution represents an effective assignment of robots to tasks and improves the overall efficacy of the MRS. Colloquially speaking, this report answers the question of ``which robot should perform which task?''[3]


% Enumeration of report objectives and report structure
The purpose of this report is to categorize which meta-heuristic optimization techniques are effective within a given scenario. For example, which algorithms are better-suited for online analysis and which for offline analysis.
The report will continue with a review of existing literature and identifying the commonalities and differences with the solution presented in this report. Then we will present a problem formulation and model from which we will implement our algorithms. The paper then describes how the well-known Traveling Salesman Problem can be reduced to Complex Task Allocation. From there, the report identifies the criteria upon which each meta heuristic technique's performance is evaluated. Then the results of running each technique are then presented against these performance criteria. From these results, conclusions are drawn and recommendations for future work are suggested.



%  [1][Alaa Khamis, Cooperative Multirobot Systems, Plenary Talk at IAC2014]
%  [2]``Complex Task Allocation in Mobile Surveillance Systems'',
%  [3] ``A comparative Study between Optimization and
% Market-based Approaches to Multi-robot Task Allocation''.
% [4] T. Bektas, “The multiple traveling salesman problem: an over- view of formulations and solution procedures,” Omega, vol. 34, no. 3, pp. 209–219, 2006.
% [5] http://en.wikipedia.org/wiki/Mathematical\_optimization

% Summarize the importance of the problem you are trying to solve and the reason that motivated you to select this project. Explain what was the problem or challenge that you were given? state the purpose of the project and how did you solve it? Enumerate the objectives of the project and describe in brief the structure of the report.


\section{Literature Review}
The following papers were reviewed to obtain some perspective on different approaches to complex task allocation:
``Complex Task Allocation in Mobile Surveillance Systems'', ``A comparative Study between Optimization and
Market-based Approaches to Multi-robot Task Allocation''.

An examination of existing literature reveals two predominate schools of approach to solving Multirobot Task Allocation (MRTA). There are market-based and optimization-based approaches.
The market-based approach is inspired from the development of market economies that have developed in human societies.
Each robot is made analogous to an individual seeking profit within a market and as a result, effecting a redistribution of resources within the environment.
The optimization-based approach is rooted in mathematics rather than socio-economic observation.
The thrust is to identify an equation that captures the constrains contained in a problem and to find a solution that either maximizes the profit or minimizes the damage caused by a given solution.
The goal of this report is to perform a comparative study of meta-heuristic techniques and so this directs the attention of this paper onto an optimization-based approach for solving MRTA.
A comparison will be made to the results of market-based approaches as implemented by [2] \& [3].

In [2] Khamis et al. describe a taxonomy for classifying MRTA problems examined in literature. From their taxonomy, the MRTA problem examined this report has the following classifications:

\begin{enumerate}
\item Multi-task robots: Each robot is able to perform various tasks, and has a certain skill at each type of task.
\item Single-robot tasks: Each task can be completed by a single robot.
\item Instantaneous Assignment: The assignment of tasks to robots will be calculated once and will not be updated dynamically as the robots execute their given task list.
\end{enumerate}

The scope of this report will focus on a decompose-then allocate approach towards complex tasks. That is, all complex tasks will be broken up into subtasks that will then be assigned out to particular robots. This makes a strong assumption about the independence of the subtasks, but is not without precedence in the literature.[2]\\

% Contrast our approach to mTSP to [3]'s approach to mTSP
% we make task completion time a per-robot value rather than a per-task value
This report makes use of the multiple Travelling Salesman Problem formulation as described by Badreldin, Hussein, and Khamis with some important differences. [3] Instead of including an aging factor feature in the robots to reduce tour lengths, an energy capacity feature has been identified to put a harder constraint on robot tour lengths. In addition, instead of considering a minimum task completion time that holds for all robots, each type of robot has its own task completion times. This explicitly decouples a robots skill at a task from the time it takes to complete the task. It also more accurately represents that different types of robots can have radically different methods for accomplishing the same task. To reconcile this change with the idea that tasks have certain requirements, a time of infinity is assigned to robots who lack any skill at a particular task.


% FIND A PLACE FOR THIS
% We will be ignoring the condition of the robot unlike the problem formulation given in [3] because these conditions can be considered exogenous []

\subsection{Challenges}
Not all robots can perform all required tasks.\\
How decompose tasks?\\


% Conduct a critical survey on different/similar solutions and explain how your
% solution extends or differs from these solutions.

% This project should start by studying comprehensively the problem in order
% to characterize its complexity and its main challenges. Collect related
% resources and conduct a critical survey on similar solutions reported in the
% literature.

% Collect resources and think about how to explain any of the topics below
%  - Motivation
%  - Definition
%  - [*] Categorization
%  - Challenges
%  - Applications

% Suggested reference papers:
%
%  - Alaa Khamis, Ahmed Elmogy and Fakhreddine Karray, "Complex Task Allocation
%    in Mobile Surveillance Systems," Journal of Intelligent and Robotic Systems,
%    Springer
%  - Mohamed Badreldin, Ahmed Hussein and Alaa Khamis, "A Comparative Study
%    between Optimization and Market-based Approaches to Multi-robot Task
%    Allocation," Advances in Artificial Intelligence Journal, 2013.
%  - Alaa Khamis, Cooperative Multirobot Systems, Plenary Talk at IAC2014].

\section{Problem Formulation and Modeling}

% Include the problem statement and describe its model.

% In this step, an initial statement of the problem should be made. The
% internal and external factors and the objective(s) of the problem must be
% outlined. Describe the problem as standard optimization problem as
% following:
%
% Find
% $$X = {x_1, x_2, ..., x_n}^T$$
% which minimizes/maximizes $f(X)$ subject to equality constraints
% $$\forall j \in [1, m], l_j(X) = 0$$
% and inequality constraints
% $$\forall j \in [1, p], g_j(X) \leq 0$$
% (see "specification for statement of work.pdf" for a visual representation)
%
% Define the decision variable or design vector, objective function/s and the
% problem constraints.

% Include the problem statement and describe its modeling If you think there is
% a need to explain background information regarding some supplementary methods
% used in your formulation, do that here

\subsection{Problem Formulation}

Suppose we have a set of $n_\mathit{tasks}$ ``tasks" which need to be completed by a set of $n_\mathit{robots}$ ``robots".

We seek a ``solution", $S$, that consists of an assignment of each robot an ordered set of tasks for it to complete, a ``tour", such that each task is performed exactly once and our overall cost is minimized. Each tour begins and ends at the robot's ``home"; for simplicity, we represent homes as tasks.
$$
\Forall_{r=0}^{n_\mathit{robots}}
S(r) = \{ \mathit{home}(r), t_1, t_2, ..., t_n, \mathit{home}(r) \}
$$

We will consider a multi-objective cost function that accounts for
\begin{enumerate}
\item $\mathit{cost}_\mathit{time}$, how long it takes to complete all tasks, assuming the robots work in parallel
\item $\mathit{cost}_\mathit{energy}$, whether or not each robot is able to complete its tour before running out of ``energy"
\item $\mathit{cost}_\mathit{quality}$, how well the tasks are completed relative to their priorities
\end{enumerate}

\subsubsection{Time}

The time it takes to travel between tasks is a function of ``distance" and ``velocity." Each robot, $r$, may travel at a different velocity, measured in units distance per units time.
$$\mathit{velocity}(r) > 0, \in \mathbb{R}$$
Each task, $t$, may be a different distance from each other task, $u$. For simplicity, we represent home locations as tasks.
$$\mathit{distance}(t, u) > 0, \in \mathbb{R}$$

Additionally, each robot, $r$ may complete each task, $t$, in a different amount of time.
$$\mathit{task \, time}(r, t) > 0, \in \mathbb{R}$$

The total amount of time it takes for a robot, $r$, to complete a tour, $t$, is given by
$$
\mathit{tour \, time}(r, t) =
  \sum^|t|_{i=2}
  \mathit{distance}(t, u)
$$

\subsubsection{Energy}

Each robot, $r$, may be capable of a spending different amount of time on tour. One unit energy equates to the ability to spend one additional unit time on tour.
$$\mathit{energy}(r) > 0, \in \mathbb{R}$$

\subsubsection{Quality}

\subsection{Representation}

Homes vector

Priority vector

Skill matrix

Distance matrix

Solution representation

\subsection{Modeling as Traveling Salesman Problem (TSP)}

% In this important step, an abstract mathematical model is built for the
% problem. The modeler can be inspired by similar models in the literature.
% This will reduce the problem to well-studied optimization models. Usually,
% models we are solving are simplifications of the reality. They involve
% approximations and sometimes they skip processes that are complex to
% represent in a mathematical model. For example, travelling salesman problem
% (TSP) and multiple travelling salesman problem (mTSP) are commonly used as
% models for real-life problems such as school bus routing problem and complex
% task allocation problem.
\subsubsection{Adaptation}
The area of interest for the robots in the MRS can be represented as a two dimensional bounded space. Within this space, the location of tasks and robot home locations can be represented as a graph. As described in the previous section, the goal is to create an assignment of tasks to robots which minimizes the total cost of travel. This makes the MRTA problem a good fit for reduction to the mTSP problem. This report will be making use of some well-studied variations of mTSP [3].
\begin{enumerate}
\item \textbf{Salesmen starting node}: Robots are not guaranteed to start from the same node and must end their tour by returning to their starting node.
\item \textbf{Number of salesmen}: The number of robots can vary between instances of this problem, but is static for the duration of any given instance.
\item \textbf{City time frame}: Robots take a certain amount of time to complete a task and therefore spend a certain amount of time at a given node.
\item \textbf{Fair division of salesmen}: There are constraints on the maximum amount of work that a robot can perform on their tour and so the required traveling should be distributed amongst the available agents in a relatively fair manner as defined by the problem parameters.
\end{enumerate}

In an MRS, there is heterogeneity in robot composition. This requires the augmentation of the ``salesman'' idea to support some differentiating factors. This report has identified 3 main features:

\begin{enumerate}
\item \textbf{Velocity}: Each robot has a speed at which they travel between tasks.
\item \textbf{Energy}: Each robot has an energy capacity that restricts how long it can be away from its home node.
\item \textbf{Skill}: Each robot has a skill rating that represents its ability to complete a task.
\item \textbf{Task Completion Time}: Robots do not necessarily take the same amount requires a different amount of time to complete

\end{enumerate}

In this MRTA problem, there is also heterogeneity in the tasks that area assigned to visit. For this reason, the idea of ``cities'' have been augmented with the following features:

\begin{enumerate}
\item \textbf{Priority}: Some tasks are more important that others and should be considered first.
\end{enumerate}

The next section describes the graph that will be constructed for use with mTSP.

\subsubsection{The Graph}
Given a population of $\mathit{robots}$, a set of $\mathit{tasks}$, a set of $\mathit{homes}$ a priority for each task $P$, each robot's skill at performing each task $M_{skill}(r,t)$ and an ordered assignment of tasks to robots $S(r)$, for each $r \in \mathit{robots}$
we can create a directed, weighted graph as follows:

We will model complex task allocation loosely on the traveling salesman problem.

Given a random initial solution, $S_0$,

\begin{align*}
	G &= (V, E) \\
	V &= \mathit{homes} \cup \mathit{tasks} \\
	E_{task_i, task_j} &= D_\mathit{task-task}(i,j) \qquad \forall t \in \mathit{tasks} \\
  E_{home_i, task_j} &= D_\mathit{home-task}(i,j) \qquad \forall d \in \mathit{homes}\\
	E_{task_i, home_j} &= D_\mathit{task-home}(i,j) \qquad \forall d \in \mathit{homes}\\
\end{align*}
%

That is, we create a graph that shows the distances between every task and the distances between every task and every home.

From here, we can run TSP on the created graph. The cost of taking each edge will be determined using $w$ which will take in the distance represented by that edge as an input. Every robot starts at their home.

\subsection{Reduced Size Problem}

% Describe a reduced version of the problem in order to be used to perform
% hand-iterations. For example, if you are studying plant layout problem
% (PLP), a reduced size problem may contain only 4 departments (facilities)
% and 4 locations.

% Describe a small scale problem of the original one Try to perform hand
% iterations to make sure modeling is done properly

In this section, we define a reduced size complex task allocation problem which
will be used to perform hand-iterations of various optimization algorithms in
the following sections.

Suppose we have two robots with the following attributes:

\begin{tabular}{lll}
        & \textbf{velocity} & \textbf{energy} \\
\textbf{robot 1} & 0.9146   & 8.2024          \\
\textbf{robot 2} & 0.6509   & 5.0418
\end{tabular}
\vspace{1em}

These robots must complete three tasks:

\begin{tabular}{llllll}
                &                   & \textbf{robot 1} & \textbf{robot 1} & \textbf{robot 2} & \textbf{robot 2} \\
                & \textbf{priority} & \textbf{skill}   & \textbf{time}    & \textbf{skill}   & \textbf{time} \\
\textbf{task 1} & 0.7761            & 0.97195          & 0.25511          & 0.33896          & 0.61632       \\
\textbf{task 2} & 0.3663            & 0.46364          & 0.88416          & 0.44659          & 0.37353       \\
\textbf{task 3} & 0.8863            & 0.83202          & 0.61189          & 0.02791          & 0.30623
\end{tabular}
\vspace{1em}

The distances between tasks and home locations are:

\begin{tabular}{llllll}
                & \textbf{task 1} & \textbf{task 2} & \textbf{task 3} & \textbf{home 1} & \textbf{home 2} \\
\textbf{task 1} & 8.6779          & 3.7604          & 6.2783          & 9.3271          & 1.4957 \\
\textbf{task 2} & 8.0510          & 3.3071          & 8.4473          & 1.3190          & 4.9917 \\
\textbf{task 3} & 3.2972          & 8.5977          & 2.7686          & 8.5270          & 0.4359 \\
\textbf{home 1} & 2.5143          & 8.4739          & 4.6241          &    -            &    -   \\
\textbf{home 2} & 1.2170          & 6.1530          & 3.9628          &    -            &    -
\end{tabular}

\subsection{Real Problem}

% The real size problem formulation and modeling will be used to show the
% ability of the proposed solutions implemented in handling large size
% problems.

% Gradually Increase the size of problem to study the scalability of your model
% Some models will fail in this step (any examples? Is the any way to know that
% beforehand?)

\section{Proposed Solution}

As an initial solution, we will use
$$S_0 = [0, 1, \mathit{sentinel}, 2 ]$$
Which specifies the paths
\begin{align*}
\mathit{robot}_0: & \mathit{home}_0 \rightarrow \mathit{task}_0 \rightarrow \mathit{task}_1 \rightarrow  \mathit{home}_0
\mathit{robot}_1: & \mathit{home}_1 \rightarrow \mathit{task}_2 \rightarrow \mathit{home}_1
\end{align*}

% Once the problem is formulated and modeled, the five main algorithms studied
% in this course (TA, SA, GA, PSO and ACO) must be applied to generate a “good”
% solution for the problem. The solution may be optimal or suboptimal.

% At least two hand iterations must be performed on the reduced size problem to
% show how to use the studied algorithms in solving the selected problem.

% The studied algorithms must be implemented from scratch using Matlab/Octave
% without using any toolboxes.

%  - Generate an initial solution.
%  - Suggest a cost function (objective function) suitable for this problem.
%  - Define a suitable neighborhood operator.
%  - Define a suitable solving strategy for this problem.
%  - Select your own values for the parameter and explain the basis for your
%      selection.
%  - Describe how each algorithm (TS, SA, GA, PSO and ACO) will proceed to
%       solve this problem by performing at least two hand iterations on a
%       reduced version of the problem.
%  - Implement the proposed solution using Matlab/Octave.

% Once the problem is formulated and modeled, the five main algorithms studied
% in this course (TA, SA, GA, PSO and ACO) must be applied to generate a “good”
% solution for the problem. The solution may be optimal or suboptimal.

% Apply five main optimization algorithms (TS, SA, GA, PSO, and ACO) Try to
% generate a “good” solution that may be optimal or sub-optimal

% Include at least two hand iterations on the reduced size of the problem The
% studied algorithms should be implemented from scratch in Matlab / Octave.
% Using toolboxes are NOT allowed.

\subsection{Tabu Search Algorithm} % Lucas

\subsubsection{Hand Iterations}

We will use a tabu tenure of 1.

We define our tabu list as...

\subsubsubsection{Iteration 1}

We begin with our randomly selected initial solution
$$S_0 = [ 0, 1, X, 2 ]$$

Next, we find all neighbouring solutions and evaluate the cost of each. No solutions are tabu yet because our tabu list is empty

\begin{tabular}{lllll}
& \textbf{swap}   & \textbf{solution}    & \textbf{tabu?} & \textbf{cost}  \\

$S_{1,1}$ & $1,2$ & $[1, 0, X, 2]$ & no & 1.0810   \\
$S_{1,2}$ & $1,3$ & $[X, 1, 0, 2]$ & no & 0.55200  \\
$S_{1,3}$ & $1,4$ & $[2, 1, X, 0]$ & no & 1.3390   \\
$S_{1,4}$ & $2,3$ & $[0, X, 1, 2]$ & no & 1.5940   \\
$S_{1,5}$ & $2,4$ & $[0, 2, X, 1]$ & no & 1.2800   \\
$S_{1,6}$ & $3,4$ & $[0, 1, 2, X]$ & no & 0.73900  \\
\end{tabular}

Observe that $S_{1,6}$ has the lowest cost. Therefore the best solution, $S_{1, \text{best}}$.

Since this solution was created by swapping elements 3 and 4 in $S_0$, we mark those in our tabu list

\begin{tabular}{lllll}
position & 1 & 2 & 3 & 4 \\
tenure   & 0 & 0 & 1 & 1
\end{tabular}
\vspace{1.5em}

\subsubsubsection{Iteration 2}

We begin with $$S_{1, \text{best}} = [0, 1, 2, X]$$

Next, we find all neighbouring solutions and evaluate the cost of each.

\begin{tabular}{lllll}
& \textbf{swap}   & \textbf{solution}    & \textbf{tabu?} & \textbf{cost}  \\

$S_{2,1}$ & $1,2$ & $[1, 0, 2, X]$ & no  & 0.39500 \\
$S_{2,2}$ & $1,3$ & $[2, 1, 0, X]$ & yes & 0.86000 \\
$S_{2,3}$ & $1,4$ & $[X, 1, 2, 0]$ & yes & 0.95200 \\
$S_{2,4}$ & $2,3$ & $[0, 2, 1, X]$ & yes & 1       \\
$S_{2,5}$ & $2,4$ & $[0, X, 2, 1]$ & yes & 1.7100  \\
$S_{2,6}$ & $3,4$ & $[0, 1, X, 2]$ & yes & 1.0900  \\
\end{tabular}

Observe that $S_{2,1}$ has the lowest cost and is not tabu. Therefore it is the best solution, $S_{2, \text{best}}$.

Since this solution was created by swapping elements 1 and 2, we mark those as tabu with a starting tenure of 1. We also decrement the tenure of all other elements in the tabu list.

\begin{tabular}{lllll}
position & 1 & 2 & 3 & 4 \\
tenure   & 1 & 1 & 0 & 0
\end{tabular}
\vspace{1.5em}

After two iterations, our best solution is
$$S_{\text{best}} = S_{2, \text{best}} = S_{2,1}$$

\subsection{Simulated Annealing Algorithm} % Dane

\subsubsection{Hand Iterations}

For the weighted distance function parameters, we will use $\alpha_{cost} = \beta = 2$ and $\gamma = 1$. The weighted distance function then becomes
$$
w(i, \mathit{src}, \mathit{dst}) = \begin{cases}
(2 - \text{priority}(\mathit{dst})) \times (2 - \text{skill}(i, \mathit{dst})) \times \text{distance}(\mathit{src}, \mathit{dst}) & \mathit{dst} \ne S(i,0) \\
\text{distance}(\mathit{src}, \mathit{dst}) & \text{otherwise}
\end{cases}
$$

A geometric cooling schedule will be used with an initial temperature $T_{0} = 3$ and a cooling factor $\alpha_{cooling} = 0.8$ so that
$$T_{i} = 3 \times 0.8^{i-1}$$

\subsubsubsection{Iteration 1}

We begin with our randomly selected initial solution.
$$S_0 = [ 1, 2, 0, 3 ]$$
$$\text{cost}(S_0) = 3.43$$

We then randomly swap two elements, 4 \& 3 to create a neighbouring solution.
$$S_1 = [ 1, 2, 3, 0 ]$$
$$\text{cost}(S_1) = 3.319$$

Since $\text{cost}(S_1) < \text{cost}(S_0)$ the probability of selection $P = 1$.

\subsubsubsection{Iteration 2}

Swap 3 \& 1
$$S_2 = [ 3, 2, 1, 0 ]$$
$$\text{cost}(S_2) = 2.08$$
$$\text{cost}(S_2) < \text{cost}(S_1) \rightarrow P = 1$$

\subsubsubsection{Iteration 3}

Swap 1 \& 4
$$S_3 = [ 0, 2, 1, 3 ]$$
$$\text{cost}(S_3) = 2.242$$
$$P = e^{-\frac{cost(S_3) - cost(S_2)}{T_3}} \doteq 0.9191$$

We then pick a random number $r = 0.4228$. Since $r < P$ the non-improving solution $S_3$ is accepted.

After 3 iterations, the best solution is
$$S_{best} = S_2 = [ 3, 2, 1, 0 ]$$

\subsection{Genetic Algorithm} % Austin

\subsection{Particle Swarm Optimization Algorithm} % Ariel

\subsubsection{Hand Iterations}

% TODO don't say "in this course", find the actual citation.
As per the reccomendations in this course, we initialize $c_1 = c_2 = 1.4944$ and $w = 0.792$.

\subsubsubsection{Iteration 1}

We choose $r_1 = 0.7426$ and $r_2 = 0.4276$ as random constants for this iteration.

We start with two randomly selected initial positions (solutions)
% TODO use this solution notation consistently
% TODO use 1-indexing consistently
\begin{align*}
S_0^1 = [1, 2, X, 3], & \qquad cost(S_0^1) = 1.0900 \\
S_0^2 = [3, 2, X, 1], & \qquad cost(S_0^2) = 1.3300 \\
S_0^3 = [1, X, 3, 2], & \qquad cost(S_0^3) = 1.5940
\end{align*}

Observe that $S_0^1$ has the lowest initial score. This becomes our initial $\mathit{gbest}$.
$$\mathit{gbest} = [1, 2, X, 3]$$

% TODO use a more formal citation format
% TODO set up bibtex
For each position, $i$, we calculate $v_1^i$ using the following equation. Note that we redefine the subtraction of two positions, the addition of a velocity and a position, and the multiplication of a velocity by a scalar as defined in M. Clerc's paper, ``Discrete Particle Swarm Optimization."
$$v_1^i = w v_0^i + c_1 r_1 (x_\mathit{lbest} - x_0^i) + c_2 r_2 (x_\mathit{gbest} - x_0^i)$$

The resultant velocities are \mbox{}
% TODO standardize tabular presentation, centered, bold headings
\begin{center}
\begin{tabular}{lllllll}
        & position     & cost   & lbest position & lbest cost & $v_0$  & $v_1$    \\
$S_0^1$ & $[1, 2, X, 3]$ & $1.0900$ & $[1, 2, X, 3]$   & $1.0900$     & $[]$     & $[]      $ \\
$S_0^2$ & $[3, 2, X, 1]$ & $1.3300$ & $[3, 2, X, 1]$   & $1.0900$     & $[]$     & $[(1, 4)]$ \\
$S_0^2$ & $[1, X, 3, 2]$ & $1.7100$ & $[1, X, 3, 2]$   & $1.7100$     & $[]$     & $[(2, 4)]$ \\
\end{tabular}
\end{center}

\subsection{Iteration 2}

We choose $r_1 = 0.2351$ and $r_2 = 0.8262$ as random constants for this iteration.

Applying the velocities calculated in iteration 1 to the positions in iteration 1, we obtain the positions for iteration 2. We calcuate the velocity of each using the same equation, generalized to calculate the velocity for solution $j$
$$v_j^i = w v_{j-1}^i + c_1 r_1 (x_\mathit{lbest} - x_{j-1}^i) + c_2 r_2 (x_\mathit{gbest} - x_{j-1}^i)$$

The resultant velocities are \mbox{}
% TODO calculate these
\begin{center}
\begin{tabular}{lllllll}
        & position       & cost     & lbest position   & lbest cost   & $v_1$      & $v_2$    \\
$S_1^1$ & $[1, 2, X, 3]$ & $1.0900$ & $[1, 2, X, 3]$   & $1.0900$     & $[]      $ & ? \\
$S_1^2$ & $[1, 2, X, 3]$ & $1.0900$ & $[1, 2, X, 3]$   & $1.0900$     & $[(1, 4)]$ & ? \\
$S_1^2$ & $[1, 3, X, 2]$ & $1.2800$ & $[1, X, 3, 2]$   & $1.2800$     & $[(2, 4)]$ & ? \\
\end{tabular}
\end{center}

Observe that $S_0^1$ has the still has lowest global score. Our $\mathit{gbest}$ is unchanged.

\subsection{Ant Colony Optimization Algorithm} % Sandy

To model this problem with ACO, we will first transform it into a single-agent TSP problem, and subsequently carry out ACS on the resulting graph.

For the purposes of ACS, the key insight for this transformation is a subtle modification of the graph during search-time. Define the distance between any two $depot$s to be 0, and, at first, connect each task node only to $depot_1$.

Upon visiting $depot_1$, ``teleport'' the ant to $depot_2$, connecting it to all of the task nodes, and disconnecting $depot_1$. Upon doing this, update an internal state variable $robot_{current}$, whose purpose it is to correctly evaluate the $cost()$ function.

The first two iterations of performing ACS on this transformation on the sample problem are fleshed out below:

\subsubsection{Iteration 1}

The starting node is $depot_1 = 4$.

$$
\eta = \sum_{n \in N_4} \frac{\uptau_{4n}^\alpha}{d_{4n}^\beta} = 3.5133
$$

\begin{align*}
p_{4i} &= \frac{\uptau_{4n}^\alpha d_{4i}^{-\beta}}{\eta} \\
\\
p_{41} &= 0.19155 \\
p_{42} &= 0.24881 \\
\mathbf{p_{43}} &= \mathbf{0.27501} \\
p_{44} &= 0.28464
\end{align*}

$$
\text{Tour} = \{4, 3\}
$$

% % %

$$
\eta = \sum_{n \in N_3} \frac{\uptau_{3n}^\alpha}{d_{3n}^\beta} = 2.6438
$$

\begin{align*}
p_{3i} &= \frac{\uptau_{3n}^\alpha d_{3i}^{-\beta}}{\eta} \\
\\
\mathbf{p_{31}} &= \mathbf{0.32551} \\
p_{32} &= 0.33063 \\
p_{34} &= 0.34386
\end{align*}

$$
\text{Tour} = \{4, 3, 1\}
$$

% % %

$$
\eta = \sum_{n \in N_1\setminus\{3\}} \frac{\uptau_{1n}^\alpha}{d_{1n}^\beta} = 1.5792
$$

\begin{align*}
p_{1i} &= \frac{\uptau_{1n}^\alpha d_{1i}^{-\beta}}{\eta} \\
\\
p_{12} &= 0.60423 \\
\mathbf{p_{14}} &= \mathbf{0.39577}
\end{align*}

$$
\text{Tour} = \{4, 3, 1, 4, 5\}
$$

Note that traveling to $depot_1 = 4$ has triggered the ant to automatically move to $depot_2 = 5$, and thus the ant now uses $robot_2$'s cost function.

% % %

$$
\mathbf{p_{52}} = \mathbf{1}
$$

$$
\text{Tour} = \{4, 3, 1, 4, 5, 2, 5\} \qquad
d_{tour} = 1.0210
$$

Update pheromones:

$$
\uptau_{ij} =
\begin{tabular}{r | c c c c c}
$i \setminus j$ & 1 & 2 & 3 & 4 & 5 \\
\hline
1 & $\emptyset$ & 0.90000 & 1.09916 & 1.09916 & 0.90000 \\
2 & 0.90000 & $\emptyset$ & 0.90000 & 0.90000 & 1.29833 \\
3 & 1.09916 & 0.90000 & $\emptyset$ & 1.09916 & 0.90000 \\
4 & 1.09916 & 0.90000 & 1.09916 & $\emptyset$ & 1.09916 \\
5 & 0.90000 & 1.29833 & 0.90000 & 1.09916 & $\emptyset$
\end{tabular}
$$



\subsubsection{Iteration 2}

$$
\eta = \sum_{n \in N_4} \frac{\uptau_{4n}^\alpha}{d_{4n}^\beta} = 3.4884
$$

\begin{align*}
p_{4i} &= \frac{\uptau_{4n}^\alpha d_{4i}^{-\beta}}{\eta} \\
\\
\mathbf{p_{41}} &= \mathbf{0.21204} \\
p_{42} &= 0.22552 \\
p_{43} &= 0.30444 \\
p_{44} &= 0.25800
\end{align*}

$$
\text{Tour} = \{4, 1\}
$$

% % %

$$
\eta = \sum_{n \in N_1} \frac{\uptau_{1n}^\alpha}{d_{1n}^\beta} = 2.5730
$$

\begin{align*}
p_{1i} &= \frac{\uptau_{1n}^\alpha d_{1i}^{-\beta}}{\eta} \\
\\
\mathbf{p_{42}} &= \mathbf{0.33376} \\
p_{43} &= 0.39924 \\
p_{44} &= 0.26699
\end{align*}

$$
\text{Tour} = \{4, 1, 2\}
$$

% % %

$$
\eta = \sum_{n \in N_2\setminus\{1\}} \frac{\uptau_{2n}^\alpha}{d_{2n}^\beta} = 1.5068
$$

\begin{align*}
p_{2i} &= \frac{\uptau_{2n}^\alpha d_{1i}^{-\beta}}{\eta} \\
\\
p_{23} &= 0.54054 \\
\mathbf{p_{24}} &= \mathbf{0.45946}
\end{align*}

$$
\text{Tour} = \{4, 1, 2, 4, 5\}
$$

% % %

\begin{align*}
\mathbf{p_{53}} &= \mathbf{1}
\end{align*}

$$
\text{Tour} = \{4, 1, 2, 4, 5, 3, 5\} \qquad d_{tour} = 0.8900
$$

$$
\uptau_{ij} =
\begin{tabular}{r | c c c c c}
$i \setminus j$ & 1 & 2 & 3 & 4 & 5 \\
\hline
1 & $\emptyset$ & 1.01450 & 0.98925 & 1.19375 & 0.81000 \\
2 & 1.01450 & $\emptyset$ & 0.81000 & 1.01450 & 1.16849 \\
3 & 0.98925 & 0.81000 & $\emptyset$ & 0.98925 & 1.21900 \\
4 & 1.19375 & 1.01450 & 0.98925 & $\emptyset$ & 1.19375 \\
5 & 0.81000 & 1.16849 & 1.21900 & 1.19375 & $\emptyset$
\end{tabular}
$$

\subsubsection{Result}

$$
\text{Tour}_{best} = \{4, 1, 2, 4, 5, 3, 5\} \qquad d_{best} = 0.8900
$$

\section{Performance Evaluation}

% Define some experiments (scenarios) to quantitatively evaluate the performance
% of your algorithm. Experiments must be run several times and average results
% should be reported

% Establish a set of evaluation metrics and run some experiments with different
% values of algorithm parameters to quantitatively and qualitatively assess the
% performance of the developed solution using different meta-heuristic
% optimization techniques. Students must identify the pros and cons of each
% technique and assess the quality of work as well as its fit with project
% objectives.

% Report your observation and interpret the obtained results. Suggest how to
% refine the implemented solutions to improve their performance.

% The implemented solutions should be tested against a set of well-defined
% evaluation metrics. These metrics may include, but are not limited to, the CPU
% time of the algorithm, number of iterations to converge, time per iteration,
% optimality (if the ground truth is known), etc.

% A number of experiments/scenarios should be conducted to quantitatively
% evaluate the performance of the proposed solutions. You should run each
% experiment several times and report the average results.

% Determine some evaluation metrics (time is a potentially useful candidate) Run
% some experiments with different values of algorithms parameters to
% quantitatively and qualitatively assess the performance of the developed
% solution Identify the pros and cons of each method

Each meta-heuristic will be evaluated quantitatively and qualitatively.

The following instances of MRTA will be studied:
\begin{enumerate}
\item \textbf{Small scale}: Five tasks and three robots
\item \textbf{Medium scale}: Fifteen tasks and five robots
\item \textbf{Small scale}: Fifty tasks and fifteen robots
\end{enumerate}

The different scenarios will allow for qualitative analysis on the scalability of meta-heuristic techniques and where they are best applied. Within each scenario, each technique can be compared using some quantitative metrics. Badreldin et al. [3] identify two suitable measures: the computational time taken to find the best solution and the optimality of the best solution obtained by a meta-heuristic technique.

\section{Conclusions \& Recommendations}
% Report your observation and interpret obtained results. Briefly explain your
% research work, and suggest how to improve the implemented solutions

% Summarize the conclusion and future improvement. Explain how did you solve the
% problem, what problems were met? What did the results show? and how to refine
% the proposed solution? You may organize ideas using lists or numbered points,
% if appropriate, but avoid making your report into a check-list or a series of
% encrypted notes.

This paper has presented a comparative study of meta-heuristic algorithms used within an optimization based approach to solving the MRTA problem. Five meta-heuristics were considered: Tabu Search, Simulated Annealing, Genetic Algorithms, Particle Swarm optimization, and Ant Colony Optimization. RECAP RESULTS OF EXPERIMENTS.

\section*{References}

% Every report needs references; in fact, your failure to consult references for
% guidance may be considered negligence. On the other hand, when you include
% sentences, photos, drawings or figures from other sources in your report, the
% complete reference must be cited. Failure to do so is plagiarism, an academic
% infraction with serious consequences.

% Remember to cite anything you get from other sources
%  - Other research papers
%  - Drawings, charts, figures, etc.

% Failure to do so is plagiarism, an academic infraction with serious
% consequences. The complete references should be shown at the end of your
% report



% M. Clerc, “Discrete Particle Swarm Optimization,” in New Optimization Techniques in Engineering. Springer-Verlag, 2004.

\end{document}
